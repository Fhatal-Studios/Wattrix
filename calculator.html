<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Wattrix • Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#050505" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%237559ff'/%3E%3Cstop offset='1' stop-color='%2338fbd0'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpolygon points='24,4 44,28 32,28 48,60 20,32 34,32' fill='url(%23g)'/%3E%3C/svg%3E">

  <style>
    /* Page Specific Overrides */
    .breakdown-list {
      margin-top: 20px;
      text-align: left;
    }

    .breakdown-list li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: var(--text-muted);
    }

    .breakdown-list li span {
      color: #fff;
      font-weight: 500;
    }

    .breakdown-list .group-header {
      color: var(--color-3);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 16px;
      border-bottom: none;
      font-weight: 700;
    }

    .breakdown-list .mono {
      font-family: var(--font-mono);
    }

    .text-ok {
      color: var(--color-2) !important;
    }

    .text-warn {
      color: #f59e0b !important;
    }

    .text-danger {
      color: #ef4444 !important;
    }

    .kpi-val.text-warn {
      color: #f59e0b;
    }

    .kpi-val.text-ok {
      color: #fff;
    }
  </style>
</head>

<body>

  <div class="bg-grid"></div>
  <div id="loader">
    <div class="spinner"></div>
  </div>

  <!-- Nav -->
  <div class="nav-wrapper">
    <nav class="nav">
      <a href="index.html" class="brand" aria-label="Wattrix Home">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#7559ff" />
              <stop offset="1" stop-color="#38fbd0" />
            </linearGradient>
          </defs>
          <polygon points="24,4 44,28 32,28 48,60 20,32 34,32" fill="url(#g1)" />
        </svg>
        WATTRIX
      </a>
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="calculator.html" class="active">Calculator</a>
        <a href="about.html">About</a>
      </div>
      <div class="nav-cta"><a href="about.html#privacy" class="btn">FAQ</a></div>
    </nav>
  </div>

  <section class="section" style="padding-top:140px;">
    <div class="container">
      <div class="calc-layout">

        <!-- COLUMN 1: INPUTS -->
        <div class="card">
          <h2 style="margin-bottom:24px;">Trip Parameters</h2>

          <div class="input-group">
            <label>Usable Battery (kWh)</label>
            <input id="usableKWh" type="number" step="0.1" placeholder="e.g. 75">
          </div>

          <div class="input-group">
            <label>Average Efficiency</label>
            <div class="d-flex gap-2">
              <input id="whPerKm" type="number" placeholder="e.g. 170" style="flex:1">
              <select id="unitDist" style="width:100px">
                <option value="km">Wh/km</option>
                <option value="mi">Wh/mi</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label>Trip Distance</label>
            <div class="d-flex gap-2">
              <input id="tripKm" type="number" placeholder="e.g. 300" style="flex:1">
              <select id="distUnit" style="width:100px">
                <option value="km">km</option>
                <option value="mi">mi</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label>Electricity Price</label>
            <div class="d-flex gap-2">
              <input id="pricePerKWh" type="number" step="0.01" value="0.20" style="flex:1">
              <select id="currency" style="width:80px">
                <option>€</option>
                <option>$</option>
                <option>£</option>
              </select>
            </div>
          </div>

          <div class="input-group">
            <label>Charger Power (kW)</label>
            <input id="chargerPower" type="number" value="11">
          </div>

          <div style="background:rgba(255,255,255,0.03); padding:16px; border-radius:12px; margin-top:24px;">
            <h4 style="margin-bottom:12px; font-size:14px; color:#fff;">Advanced</h4>

            <div class="input-group">
              <label>Safety Buffer (%)</label>
              <div style="display:flex; align-items:center; gap:12px;">
                <input id="bufferPct" type="range" min="0" max="50" value="0" step="5" style="flex:1"
                  oninput="document.getElementById('bufVal').innerText=this.value+'%'">
                <span id="bufVal" class="mono" style="width:40px; text-align:right;">0%</span>
              </div>
            </div>

            <div class="d-flex gap-3">
              <div class="input-group" style="flex:1">
                <label>Start SoC (%)</label>
                <input id="socFrom" type="number" value="20" min="0" max="100">
              </div>
              <div class="input-group" style="flex:1">
                <label>Target SoC (%)</label>
                <input id="socTo" type="number" value="80" min="0" max="100">
              </div>
            </div>

            <div class="input-group">
              <label>Planned Stop (hours)</label>
              <input id="plannedChargeHours" type="number" step="0.5" placeholder="0">
            </div>
          </div>

          <div style="margin-top:24px; display:flex; justify-content:space-between;">
            <button id="resetBtn" class="btn">Reset All</button>
            <button onclick="window.print()" class="btn">Print / PDF</button>
          </div>
        </div>

        <!-- Cookie Banner (Shared) -->
        <div id="cookieBanner" class="cookie-banner hidden">
          <div style="flex:1">
            <strong style="color:#fff; display:block; margin-bottom:4px;">We value your privacy</strong>
            <p style="font-size:14px; line-height:1.4;">We use cookies for analytics to improve the user experience.
              Essential cookies for functionality are always on. <a href="about.html#privacy"
                style="text-decoration:underline;">Learn more</a>.</p>
          </div>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button id="cb-reject" class="btn">Reject Optional</button>
            <button id="cb-accept" class="btn primary">Accept All</button>
          </div>
        </div>
        <!-- COLUMN 2: RESULTS (Sticky) -->
        <div class="results-card card">
          <h2 style="margin-bottom:24px; color:var(--color-2)">Results</h2>

          <div class="kpi-grid">
            <div class="kpi-box">
              <div class="kpi-val" id="kpiEnergy">0</div>
              <div class="kpi-label">Needed</div>
            </div>
            <div class="kpi-box">
              <div class="kpi-val" id="kpiTime">0h</div>
              <div class="kpi-label">Time</div>
            </div>
            <div class="kpi-box">
              <div class="kpi-val" id="kpiCost">0</div>
              <div class="kpi-label">Cost</div>
            </div>
          </div>

          <ul id="breakdownList" class="breakdown-list">
            <!-- Populated by JS -->
          </ul>
        </div>

      </div>
    </div>
  </section>

  <!-- Javascript -->
  <script src="assets/js/main.js"></script>
  <script src="assets/js/calculator.js"></script>
</body>

</html>